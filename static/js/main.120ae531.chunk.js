(this.webpackJsonpPolla=this.webpackJsonpPolla||[]).push([[0],{32:function(e,t,a){e.exports=a(50)},49:function(e,t,a){},50:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(24),s=a.n(l),o=a(52),c=a(9),i=Object(c.a)(),p=a(3),u=a(4),m=a(6),h=a(5),d=a(7),v=function(e){function t(){return Object(p.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e,t;return i.location.pathname.startsWith("/poll/")?(e=r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"navbar_logo",onClick:function(){return i.push("/")}},"Polla"),r.a.createElement("div",{className:"navbar_create-poll bottom-hover-animation",onClick:function(){return i.push("/")}},"Create another poll")),t={justifyContent:"space-between"}):(e=r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"navbar_logo",onClick:function(){return i.push("/")}},"Polla")),t={justifyContent:"center"}),r.a.createElement("div",{className:"navbar_container",style:t},e)}}]),t}(r.a.Component),f=function(e){return r.a.createElement("div",{className:"background anonymous-poll"},r.a.createElement(v,null),r.a.createElement("div",{className:"wrapper wrapper--inner wrapper--outer"},r.a.createElement("div",{className:"title-wrapper"},r.a.createElement("h1",null,"Error 404"),r.a.createElement("h2",null,e.message," Try going ",r.a.createElement("span",{className:"text-btn",onClick:function(){i.push("/create-poll")}},"home"),"."))))},g=a(11),E=a.n(g);a(37),a(41);E.a.initializeApp({apiKey:"AIzaSyCyqngK1oRjTLl4JNFUn94cMDnpU6gjy7g",authDomain:"money-saver-ff281.firebaseapp.com",databaseURL:"https://money-saver-ff281.firebaseio.com",projectId:"money-saver-ff281",storageBucket:"money-saver-ff281.appspot.com",messagingSenderId:"19846972859",appId:"1:19846972859:web:89444c492c62425e91309e"}),E.a.firestore().settings({timestampsInSnapshots:!0});var b=E.a.firestore(E.a),w=E.a,y=a(25),k=a.n(y),C=a(26),N=function(){return r.a.createElement("div",{className:"footer"},"Created by ",r.a.createElement("a",{href:"https://github.com/MMuii",target:"blank"},"Marcin \u015awiderek"))},A=function(e){return r.a.createElement("div",{className:"error-popup"},r.a.createElement("div",{className:"error-popup_message"},e.errorMsg),r.a.createElement("div",{className:"error-popup_close-btn",onClick:e.hidePopup}))},O=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,l=new Array(n),s=0;s<n;s++)l[s]=arguments[s];return(a=Object(m.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(l)))).state={pollQuestion:"",pollAnswers:{0:{content:"",votes:0},1:{content:"",votes:0},2:{content:"",votes:0}},multipleAnswers:!1,lastAnswerIndex:2,errorMessage:""},a.renderAnswers=function(){return Object.keys(a.state.pollAnswers).map((function(e,t){return r.a.createElement("input",{type:"text",className:"answer-input",id:t,placeholder:"Enter poll answer",key:t,onChange:a.handleChange,autoComplete:"off"})}))},a.addPollAnswer=function(){var e=a.state.pollAnswers,t=a.state.lastAnswerIndex+1;e[t]={},e[t].content="",e[t].votes=0,a.setState({pollAnswers:e,lastAnswerIndex:t})},a.handleChange=function(e){e.preventDefault();var t=a.state.lastAnswerIndex,n=a.state.pollAnswers;n[e.target.id].content=e.target.value,a.setState({pollAnswers:n}),e.target.getAttribute("id")==t&&""!=a.state.pollAnswers[t].content&&a.addPollAnswer()},a.handleQuestionChange=function(e){a.setState({pollQuestion:e.target.value})},a.handleSubmit=function(e){e.preventDefault();for(var t=a.state,n=t.pollQuestion,l=t.pollAnswers,s=t.multipleAnswers,o=new k.a,c=new Date,p=o.encode(c.getTime()),u={},m=0;m<Object.keys(l).length;m++)1==/\S/.test(l[m].content)&&(u[m]=l[m]);Object.keys(u).length<1?a.setState({errorMessage:"Enter one or more poll options first"}):/\S/.test(n)?b.collection("anonymousPolls").doc("".concat(p)).set({pollQuestion:n,pollAnswers:u,multipleAnswers:s}).then((function(){i.push("/poll/".concat(p))})).catch((function(e){return a.setState({errorMessage:"Error uploading data to database"}),r.a.createElement("div",null,"Error creating poll: ",e)})):a.setState({errorMessage:"Enter poll question first"})},a.checkMultipleAnswers=function(e){e.target.checked?a.setState({multipleAnswers:!0}):a.setState({multipleAnswers:!1})},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t={display:""==this.state.errorMessage?"none":"block"},a=function(){e.setState({errorMessage:""})};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"background"}),r.a.createElement("div",{className:"create-poll"},r.a.createElement(v,{location:this.props.location}),r.a.createElement("div",{className:"wrapper wrapper--outer"},r.a.createElement("div",{className:"wrapper--inner"},r.a.createElement("h1",null,"Create poll"),r.a.createElement("form",null,r.a.createElement(C.a,{className:"question-input",placeholder:"Enter poll question",onChange:this.handleQuestionChange}),this.renderAnswers(),r.a.createElement("label",{className:"container container--multiple-answers"},r.a.createElement("span",null,"Allow multiple answers"),r.a.createElement("input",{type:"checkbox",onChange:function(t){return e.checkMultipleAnswers(t)}}),r.a.createElement("span",{className:"checkmark"})),r.a.createElement("button",{className:"create-poll-button main-btn",onClick:function(t){return e.handleSubmit(t)}},"Create poll")),r.a.createElement(N,null))),r.a.createElement("div",{className:"popup-dimmer",style:t,onClick:a}),this.state.errorMessage&&r.a.createElement(A,{errorMsg:this.state.errorMessage,hidePopup:a})))}}]),t}(r.a.Component),j=a(27),S=a(28),x=a.n(S),M=function(e){var t=e.pollAnswers,a=Object.keys(t).map((function(a){return r.a.createElement("label",{id:a,key:a,className:"container"},t[a].content,r.a.createElement("input",{id:a,checked:e.checkboxesStatus[a],type:"checkbox",onChange:function(t){return e.handleCheckbox(t)}}),r.a.createElement("span",{className:"checkmark"}))}));return r.a.createElement("form",null,a,r.a.createElement("div",{className:"btn-wrapper"},r.a.createElement("button",{className:"main-btn",onClick:function(t){return e.vote(t)}},"Vote"),r.a.createElement("button",{className:"show-results-btn bottom-hover-animation",onClick:e.showResults},"Show results")))},I=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,l=new Array(n),s=0;s<n;s++)l[s]=arguments[s];return(a=Object(m.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(l)))).state={pollAnswers:{},barWidth:{},allVotes:0},a.componentDidMount=function(){var e=a.props,t=e.db,n=e.pollId;t.collection("anonymousPolls").doc("".concat(n)).get().then((function(e){e.exists?a.setState({pollAnswers:e.data().pollAnswers},(function(){a.calculateBarPercentages()})):console.log("No such document in database!")})).catch((function(e){console.log("Error getting document: ",e)}))},a.calculateBarPercentages=function(){var e=a.state.pollAnswers,t=0;Object.keys(e).forEach((function(n){t+=e[n].votes,a.setState({allVotes:t})}));var n=e;Object.keys(e).forEach((function(e){n[e].percentage=0!=t?Math.round(n[e].votes/t*100):0})),a.setState({pollAnswers:n})},a.goBackToVoting=function(e){e.preventDefault(),i.push("/poll/".concat(a.props.pollId))},a.renderResults=function(){var e=a.state.pollAnswers;return Object.keys(e).map((function(t){return r.a.createElement("div",{key:t},r.a.createElement("div",{className:"results_info"},r.a.createElement("span",{className:"results_info_content"},e[t].content),r.a.createElement("span",{className:"results_info_votes"},e[t].votes," Votes")),r.a.createElement("div",{className:"results_bar_container"},r.a.createElement("div",{className:"results_bar_fillable"},r.a.createElement("div",{className:"results_bar_filled",style:{width:"".concat(e[t].percentage,"%")}})),r.a.createElement("div",{className:"results_bar_percentage"},e[t].percentage,"%")))}))},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=1==this.state.allVotes?"vote":"votes";return r.a.createElement("div",null,this.renderResults(),r.a.createElement("div",{className:"results_bottom-wrapper"},r.a.createElement("div",{className:"results_votes-number"},r.a.createElement("span",null,this.state.allVotes)," ",t),r.a.createElement("div",{className:"results_vote-btn bottom-hover-animation",onClick:function(t){return e.goBackToVoting(t)}},"Vote")))}}]),t}(r.a.Component);function R(){return(R=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function _(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},l=Object.keys(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var D=r.a.createElement("path",{d:"M485.297 72.71v40.264h63.533v.118c20.031.024 38.208 8.197 51.342 21.355a72.402 72.402 0 0 1 21.201 51.13h.119V567.35h-.119c-.035 20.008-8.196 38.197-21.354 51.343-13.051 13.027-31.146 21.154-51.13 21.189V640H227.376v-.118c-20.02-.024-38.21-8.197-51.343-21.343a72.423 72.423 0 0 1-21.201-51.13h-.118v-85.572H91.182v-.118c-20.02-.024-38.209-8.197-51.343-21.343-13.04-13.063-21.154-31.158-21.2-51.13h-.119V72.661h.118c.036-20.032 8.209-38.221 21.355-51.343A72.402 72.402 0 0 1 91.123.118v-.119h321.512v.119c20.031.023 38.209 8.197 51.343 21.354 13.04 13.051 21.154 31.146 21.2 51.119h.119v.118zm-55.135 40.264V72.59h.119c-.012-4.712-2.044-9.118-5.28-12.366-3.2-3.2-7.595-5.209-12.366-5.209v.119H91.123v-.119c-4.736.012-9.13 2.044-12.366 5.28-3.2 3.2-5.22 7.595-5.22 12.366h.118v336.584h-.118c.011 4.724 2.055 9.118 5.29 12.366 3.19 3.2 7.596 5.209 12.355 5.209v-.118h63.533V185.636h.118c.023-20.031 8.209-38.22 21.354-51.343a72.402 72.402 0 0 1 51.131-21.2v-.119h202.846zM566.359 567.29V185.578h.118c-.012-4.725-2.056-9.13-5.292-12.379-3.189-3.2-7.594-5.208-12.354-5.208v.118H227.318v-.118c-4.736.012-9.141 2.043-12.378 5.28-3.2 3.2-5.208 7.594-5.208 12.366h.118V567.409h-.118c.011 4.724 2.043 9.118 5.28 12.366 3.2 3.201 7.594 5.209 12.365 5.209v-.118H548.89v.118c4.724-.012 9.13-2.043 12.366-5.28 3.2-3.189 5.22-7.594 5.22-12.354h-.118v-.06z"}),P=function(e){var t=e.svgRef,a=e.title,n=_(e,["svgRef","title"]);return r.a.createElement("svg",R({width:64,height:64,shapeRendering:"geometricPrecision",textRendering:"geometricPrecision",imageRendering:"optimizeQuality",fillRule:"evenodd",clipRule:"evenodd",viewBox:"0 0 640 640",ref:t},n),a?r.a.createElement("title",null,a):null,D)},V=r.a.forwardRef((function(e,t){return r.a.createElement(P,R({svgRef:t},e))})),q=(a.p,a(29)),T=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(m.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={copyText:"mmuii.github.io".concat(a.props.location.pathname),style:{color:"#000"}},a.copyToClipboard=function(){q.a.writeText("polla.com/poll/NLZDYzL2z".concat(a.props.location.pathname)),a.setState({copyText:"URL copied to clipboard!",style:{color:"#1a75ff"}}),setTimeout((function(){a.setState({copyText:"polla.com/poll/NLZDYzL2z".concat(a.props.location.pathname),style:{color:"#000"}})}),1e3)},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"share-poll"},r.a.createElement("span",null,"Share your poll!"),r.a.createElement("textarea",{readOnly:!0,rows:"1",value:this.state.copyText,style:this.state.style}),r.a.createElement("button",{onClick:function(){return e.copyToClipboard()}},r.a.createElement(V,null)))}}]),t}(r.a.Component),z=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(m.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={pollData:{},questionsChecked:[],didUserVote:!1,errorMessage:"",err404:!1},a.componentDidMount=function(){var e=a.props.match.params.pollId;b.collection("anonymousPolls").doc("".concat(e)).get().then((function(e){e.exists?a.setState({pollData:e.data()},(function(){for(var e=[],t=0;t<Object.keys(a.state.pollData.pollAnswers).length;t++)e.push(!1);a.setState({questionsChecked:e})})):a.setState({err404:!0})})).catch((function(e){console.log("Error getting document: ",e)}))},a.handleCheckbox=function(e){if(1==a.state.pollData.multipleAnswers){var t=!1;e.target.checked&&(t=!0);var n=a.state.questionsChecked;n[e.target.parentNode.id]=t,a.setState({questionsChecked:n})}else{for(var r=[],l=0;l<a.state.questionsChecked.length;l++)l==e.target.id?r.push(!0):r.push(!1);a.setState({questionsChecked:r})}},a.vote=function(e){if(e.preventDefault(),a.state.didUserVote)a.setState({errorMessage:"You have already voted on this poll!"});else if(a.state.questionsChecked.includes(!0,0))for(var t=a.props.match.params.pollId,n=a.state.questionsChecked,r=0;r<n.length;r++)n[r]&&b.collection("anonymousPolls").doc("".concat(t)).update(Object(j.a)({},"pollAnswers.".concat(r,".votes"),w.firestore.FieldValue.increment(1))).then((function(){a.setState({didUserVote:!0}),a.showResults()}));else a.setState({errorMessage:"Select your answer first!"})},a.showResults=function(){i.push("/poll/".concat(a.props.match.params.pollId,"/results"))},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidUpdate",value:function(e){this.props.location!==e.location&&this.onRouteChanged()}},{key:"onRouteChanged",value:function(){for(var e=this.state.questionsChecked,t=0;t<e.length;t++)e[t]=!1;this.setState({questionsChecked:e})}},{key:"render",value:function(){var e,t,a=this,n=!1;if(this.props.match.url=="/poll/".concat(this.props.match.params.pollId,"/results")&&(n=!0),x.a.isEmpty(this.state.pollData)&&!this.state.err404)e=r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"title-wrapper"},r.a.createElement("h1",null,"Loading"),r.a.createElement("h2",null,"Just a second...")));else{if(this.state.err404)return r.a.createElement(f,{message:"There is no such poll in database!"});t=n?r.a.createElement(I,{pollAnswers:this.state.pollData.pollAnswers,db:b,pollId:this.props.match.params.pollId}):r.a.createElement(M,{pollAnswers:this.state.pollData.pollAnswers,vote:this.vote,handleCheckbox:this.handleCheckbox,showResults:this.showResults,checkboxesStatus:this.state.questionsChecked}),e=r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"title-wrapper"},r.a.createElement("h1",null,this.state.pollData.pollQuestion),n?r.a.createElement(r.a.Fragment,null):r.a.createElement("h2",null,this.state.pollData.multipleAnswers?"Select one or more answers":"Select one answer")),t)}var l={display:""==this.state.errorMessage?"none":"block"},s=function(){a.setState({errorMessage:""})};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"background"}),r.a.createElement("div",{className:"anonymous-poll"},r.a.createElement(v,{location:this.props.location,pollId:this.props.match.params}),r.a.createElement("div",{className:"wrapper wrapper--outer"},r.a.createElement("div",{className:"wrapper--inner"},e),r.a.createElement("div",{className:"wrapper--inner"},r.a.createElement(T,{location:this.props.location})),r.a.createElement(N,null)),r.a.createElement("div",{className:"popup-dimmer",style:l,onClick:s}),this.state.errorMessage&&r.a.createElement(A,{errorMsg:this.state.errorMessage,hidePopup:s})))}}]),t}(r.a.Component);var F=function(){return r.a.createElement(o.c,{history:i},r.a.createElement("div",{className:"App"},r.a.createElement(o.d,null,r.a.createElement(o.b,{exact:!0,path:"/create-poll",component:O}),r.a.createElement(o.b,{exact:!0,path:"/poll/:pollId",component:z}),r.a.createElement(o.b,{exact:!0,path:"/poll/:pollId/results",component:z}),r.a.createElement(o.a,{from:"/Polla",to:"/create-poll"}),r.a.createElement(o.b,{path:"/",component:function(){return r.a.createElement(f,{message:"There is no URL you're looking for."})}}))))};a(48),a(49);s.a.render(r.a.createElement(F,null),document.getElementById("root"))}},[[32,1,2]]]);
//# sourceMappingURL=main.120ae531.chunk.js.map